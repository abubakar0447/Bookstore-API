2024-09-26 11:16:16.837 +05:00 [INF] User profile is available. Using 'C:\Users\Abubakar Sabir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-26 11:16:17.019 +05:00 [INF] Now listening on: http://localhost:5296
2024-09-26 11:16:17.022 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-26 11:16:17.023 +05:00 [INF] Hosting environment: Development
2024-09-26 11:16:17.024 +05:00 [INF] Content root path: E:\House of Technology Office\Bookstore API project learning\BookstoreAPI
2024-09-26 11:16:42.803 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/ - null null
2024-09-26 11:16:42.974 +05:00 [INF] Incoming Request: GET /
2024-09-26 11:16:44.685 +05:00 [WRN] Failed to determine the https port for redirect.
2024-09-26 11:16:44.688 +05:00 [INF] Outgoing Response: 404
2024-09-26 11:16:44.700 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/ - 404 0 null 1898.2231ms
2024-09-26 11:16:44.749 +05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5296/, Response status code: 404
2024-09-26 11:16:49.005 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/index.html - null null
2024-09-26 11:16:49.157 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/index.html - 200 null text/html;charset=utf-8 151.1757ms
2024-09-26 11:16:49.510 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - null null
2024-09-26 11:16:49.712 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 201.4987ms
2024-09-26 11:17:09.222 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/api/Order - null null
2024-09-26 11:17:09.230 +05:00 [INF] Incoming Request: GET /api/Order
2024-09-26 11:17:09.236 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 11:17:09.276 +05:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrders() on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 11:17:10.076 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) executed in 2ms
2024-09-26 11:17:10.083 +05:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 11:17:10.098 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) in 812.396ms
2024-09-26 11:17:10.109 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 11:17:10.112 +05:00 [INF] Outgoing Response: 401
2024-09-26 11:17:10.120 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/api/Order - 401 null application/json; charset=utf-8 897.3988ms
2024-09-26 11:18:08.208 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json 72
2024-09-26 11:18:08.217 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 11:18:08.220 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 11:18:08.235 +05:00 [INF] Route matched with {action = "Login", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookstoreAPI.Models.DTOs.LoginDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 11:18:09.583 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 11:18:09.700 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 11:18:09.703 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 11:18:11.536 +05:00 [INF] Executed DbCommand (127ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 11:18:11.885 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) executed in 3314ms
2024-09-26 11:18:11.888 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 11:18:11.894 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) in 3651.4702ms
2024-09-26 11:18:11.900 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 11:18:11.902 +05:00 [INF] Outgoing Response: 200
2024-09-26 11:18:11.920 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 200 null application/json; charset=utf-8 3711.559ms
2024-09-26 11:18:36.878 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/api/Order - null null
2024-09-26 11:18:36.885 +05:00 [INF] Incoming Request: GET /api/Order
2024-09-26 11:18:37.238 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 11:18:37.240 +05:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrders() on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 11:18:37.521 +05:00 [INF] Executed DbCommand (18ms) [Parameters=[@__customerId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status], [t].[OrderId], [t].[BookId], [t].[Quantity], [t].[UnitPrice], [t].[Id], [t].[AuthorId], [t].[ISBN], [t].[Price], [t].[StockQuantity], [t].[Title]
FROM [Orders] AS [o]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t] ON [o].[Id] = [t].[OrderId]
WHERE [o].[CustomerId] = @__customerId_0
ORDER BY [o].[Id], [t].[OrderId], [t].[BookId]
2024-09-26 11:18:37.725 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) executed in 481ms
2024-09-26 11:18:37.726 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookstoreAPI.Models.DTOs.OrderReadDTO, BookstoreAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-26 11:18:37.762 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) in 519.9554ms
2024-09-26 11:18:37.771 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 11:18:37.773 +05:00 [INF] Outgoing Response: 200
2024-09-26 11:18:37.774 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/api/Order - 200 null application/json; charset=utf-8 895.4908ms
2024-09-26 12:30:57.406 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/api/Order - null null
2024-09-26 12:30:57.415 +05:00 [INF] Incoming Request: GET /api/Order
2024-09-26 12:30:57.420 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 12:30:57.423 +05:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrders() on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 12:30:57.508 +05:00 [INF] Executed DbCommand (15ms) [Parameters=[@__customerId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status], [t].[OrderId], [t].[BookId], [t].[Quantity], [t].[UnitPrice], [t].[Id], [t].[AuthorId], [t].[ISBN], [t].[Price], [t].[StockQuantity], [t].[Title]
FROM [Orders] AS [o]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t] ON [o].[Id] = [t].[OrderId]
WHERE [o].[CustomerId] = @__customerId_0
ORDER BY [o].[Id], [t].[OrderId], [t].[BookId]
2024-09-26 12:30:57.516 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) executed in 70ms
2024-09-26 12:30:57.518 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookstoreAPI.Models.DTOs.OrderReadDTO, BookstoreAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-26 12:30:57.522 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) in 96.115ms
2024-09-26 12:30:57.525 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 12:30:57.530 +05:00 [INF] Outgoing Response: 200
2024-09-26 12:30:57.531 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/api/Order - 200 null application/json; charset=utf-8 125.5547ms
2024-09-26 12:31:09.968 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/api/Customer/profile - null null
2024-09-26 12:31:09.977 +05:00 [INF] Incoming Request: GET /api/Customer/profile
2024-09-26 12:31:09.987 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI)'
2024-09-26 12:31:10.000 +05:00 [INF] Route matched with {action = "GetProfile", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile() on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 12:31:10.095 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2024-09-26 12:31:10.099 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI) executed in 85ms
2024-09-26 12:31:10.100 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 12:31:10.104 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI) in 98.531ms
2024-09-26 12:31:10.108 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI)'
2024-09-26 12:31:10.110 +05:00 [INF] Outgoing Response: 200
2024-09-26 12:31:10.111 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/api/Customer/profile - 200 null application/json; charset=utf-8 143.2728ms
2024-09-26 12:53:26.544 +05:00 [INF] Application is shutting down...
2024-09-26 12:53:40.348 +05:00 [INF] User profile is available. Using 'C:\Users\Abubakar Sabir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-26 12:53:41.151 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 12:53:41.211 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 12:53:41.292 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 12:53:42.178 +05:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 12:53:42.226 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 12:53:42.417 +05:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3);
2024-09-26 12:53:42.457 +05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-09-26 12:53:42.556 +05:00 [INF] Now listening on: http://localhost:5296
2024-09-26 12:53:42.560 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-26 12:53:42.561 +05:00 [INF] Hosting environment: Development
2024-09-26 12:53:42.562 +05:00 [INF] Content root path: E:\House of Technology Office\Bookstore API project learning\BookstoreAPI
2024-09-26 12:53:48.482 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/index.html - null null
2024-09-26 12:53:48.609 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/index.html - 200 null text/html;charset=utf-8 128.8834ms
2024-09-26 12:53:48.996 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - null null
2024-09-26 12:53:49.208 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 212.2907ms
2024-09-26 12:54:58.986 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json 24
2024-09-26 12:54:59.305 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 12:54:59.415 +05:00 [WRN] Failed to determine the https port for redirect.
2024-09-26 12:54:59.416 +05:00 [INF] Outgoing Response: 404
2024-09-26 12:54:59.417 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 404 0 null 431.6223ms
2024-09-26 12:54:59.431 +05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: PATCH http://localhost:5296/api/Order/1/status, Response status code: 404
2024-09-26 12:55:39.344 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json 72
2024-09-26 12:55:39.348 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 12:55:39.352 +05:00 [INF] Outgoing Response: 404
2024-09-26 12:55:39.354 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 404 0 null 10.0776ms
2024-09-26 12:55:39.366 +05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5296/api/Customer/login, Response status code: 404
2024-09-26 12:55:50.787 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json 72
2024-09-26 12:55:50.791 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 12:55:50.798 +05:00 [INF] Outgoing Response: 404
2024-09-26 12:55:50.800 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 404 0 null 12.9103ms
2024-09-26 12:55:50.810 +05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5296/api/Customer/login, Response status code: 404
2024-09-26 14:13:03.454 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json 72
2024-09-26 14:13:03.462 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 14:13:03.466 +05:00 [INF] Outgoing Response: 404
2024-09-26 14:13:03.468 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 404 0 null 13.699ms
2024-09-26 14:13:03.530 +05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5296/api/Customer/login, Response status code: 404
2024-09-26 14:13:58.965 +05:00 [INF] Application is shutting down...
2024-09-26 14:14:16.924 +05:00 [INF] User profile is available. Using 'C:\Users\Abubakar Sabir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-26 14:14:17.064 +05:00 [INF] Now listening on: http://localhost:5296
2024-09-26 14:14:17.068 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-26 14:14:17.072 +05:00 [INF] Hosting environment: Development
2024-09-26 14:14:17.073 +05:00 [INF] Content root path: E:\House of Technology Office\Bookstore API project learning\BookstoreAPI
2024-09-26 14:14:21.915 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/index.html - null null
2024-09-26 14:14:22.069 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/index.html - 200 null text/html;charset=utf-8 156.1681ms
2024-09-26 14:14:22.273 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - null null
2024-09-26 14:14:22.433 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 159.9183ms
2024-09-26 14:14:50.874 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json 72
2024-09-26 14:14:50.913 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 14:14:50.989 +05:00 [WRN] Failed to determine the https port for redirect.
2024-09-26 14:14:51.057 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 14:14:51.108 +05:00 [INF] Route matched with {action = "Login", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookstoreAPI.Models.DTOs.LoginDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 14:14:52.002 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 14:14:52.040 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 14:14:52.044 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 14:14:52.915 +05:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 14:14:53.244 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) executed in 1941ms
2024-09-26 14:14:53.249 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 14:14:53.261 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) in 2147.0637ms
2024-09-26 14:14:53.270 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 14:14:53.274 +05:00 [INF] Outgoing Response: 200
2024-09-26 14:14:53.293 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 200 null application/json; charset=utf-8 2419.4304ms
2024-09-26 14:15:17.428 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json 25
2024-09-26 14:15:17.433 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 14:15:17.448 +05:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-09-26 14:15:17.466 +05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-09-26 14:15:17.470 +05:00 [INF] Outgoing Response: 401
2024-09-26 14:15:17.473 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 401 0 null 44.4696ms
2024-09-26 14:15:27.646 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json 25
2024-09-26 14:15:27.650 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 14:15:27.745 +05:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-09-26 14:15:27.748 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-09-26 14:15:27.749 +05:00 [INF] Outgoing Response: 403
2024-09-26 14:15:27.750 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 403 0 null 103.5794ms
2024-09-26 15:07:25.936 +05:00 [INF] Application is shutting down...
2024-09-26 15:07:37.878 +05:00 [INF] User profile is available. Using 'C:\Users\Abubakar Sabir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-26 15:07:38.752 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 15:07:38.789 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:07:38.791 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:07:39.810 +05:00 [INF] Executed DbCommand (255ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:07:39.902 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:07:39.910 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:07:40.029 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3);
2024-09-26 15:07:40.175 +05:00 [INF] Now listening on: http://localhost:5296
2024-09-26 15:07:40.178 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-26 15:07:40.181 +05:00 [INF] Hosting environment: Development
2024-09-26 15:07:40.182 +05:00 [INF] Content root path: E:\House of Technology Office\Bookstore API project learning\BookstoreAPI
2024-09-26 15:07:46.988 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/index.html - null null
2024-09-26 15:07:47.146 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/index.html - 200 null text/html;charset=utf-8 152.5889ms
2024-09-26 15:07:47.397 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - null null
2024-09-26 15:07:47.543 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 146.4977ms
2024-09-26 15:08:53.803 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/register - application/json 106
2024-09-26 15:08:54.097 +05:00 [INF] Incoming Request: POST /api/Customer/register
2024-09-26 15:08:54.204 +05:00 [WRN] Failed to determine the https port for redirect.
2024-09-26 15:08:54.210 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Register (BookstoreAPI)'
2024-09-26 15:08:54.234 +05:00 [INF] Route matched with {action = "Register", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BookstoreAPI.Models.DTOs.RegisterDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 15:08:54.513 +05:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 15:08:54.609 +05:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2024-09-26 15:08:54.667 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-09-26 15:08:54.749 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2024-09-26 15:08:54.759 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-09-26 15:08:54.780 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 15:08:54.864 +05:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2024-09-26 15:08:54.882 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Register (BookstoreAPI) executed in 582ms
2024-09-26 15:08:54.887 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 15:08:54.898 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Register (BookstoreAPI) in 656.8039ms
2024-09-26 15:08:54.900 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Register (BookstoreAPI)'
2024-09-26 15:08:55.015 +05:00 [INF] Outgoing Response: 200
2024-09-26 15:08:55.024 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/register - 200 null application/json; charset=utf-8 1220.898ms
2024-09-26 15:15:05.916 +05:00 [INF] Application is shutting down...
2024-09-26 15:15:13.884 +05:00 [INF] User profile is available. Using 'C:\Users\Abubakar Sabir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-26 15:15:14.944 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 15:15:15.010 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:15:15.014 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:15:15.946 +05:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:15:16.100 +05:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:15:16.139 +05:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-09-26 15:15:16.270 +05:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-09-26 15:15:16.637 +05:00 [INF] Executed DbCommand (151ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2024-09-26 15:15:16.844 +05:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-09-26 15:15:16.868 +05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2024-09-26 15:15:16.887 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-09-26 15:15:16.958 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 15:15:17.190 +05:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p18='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [LastName] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [SecurityStamp] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
OUTPUT 1
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
2024-09-26 15:15:17.462 +05:00 [INF] Now listening on: http://localhost:5296
2024-09-26 15:15:17.469 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-26 15:15:17.471 +05:00 [INF] Hosting environment: Development
2024-09-26 15:15:17.473 +05:00 [INF] Content root path: E:\House of Technology Office\Bookstore API project learning\BookstoreAPI
2024-09-26 15:15:24.752 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/index.html - null null
2024-09-26 15:15:24.901 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/index.html - 200 null text/html;charset=utf-8 150.1068ms
2024-09-26 15:15:25.039 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - null null
2024-09-26 15:15:25.180 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 143.1943ms
2024-09-26 15:15:55.988 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json 59
2024-09-26 15:15:55.997 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 15:15:56.050 +05:00 [WRN] Failed to determine the https port for redirect.
2024-09-26 15:15:56.056 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:15:56.077 +05:00 [INF] Route matched with {action = "Login", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookstoreAPI.Models.DTOs.LoginDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 15:15:56.188 +05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 15:15:56.677 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) executed in 566ms
2024-09-26 15:15:56.681 +05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 15:15:56.682 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.Threading.Tasks.Task`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 15:15:56.733 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) in 649.8451ms
2024-09-26 15:15:56.740 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:15:56.743 +05:00 [INF] Outgoing Response: 200
2024-09-26 15:15:56.748 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 200 null application/json; charset=utf-8 760.6086ms
2024-09-26 15:17:01.908 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/api/Customer/profile - null null
2024-09-26 15:17:01.916 +05:00 [INF] Incoming Request: GET /api/Customer/profile
2024-09-26 15:17:01.981 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI)'
2024-09-26 15:17:01.986 +05:00 [INF] Route matched with {action = "GetProfile", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile() on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 15:17:02.049 +05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2024-09-26 15:17:02.057 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI) executed in 51ms
2024-09-26 15:17:02.067 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 15:17:02.071 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI) in 81.845ms
2024-09-26 15:17:02.073 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI)'
2024-09-26 15:17:02.074 +05:00 [INF] Outgoing Response: 200
2024-09-26 15:17:02.079 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/api/Customer/profile - 200 null application/json; charset=utf-8 170.8987ms
2024-09-26 15:17:10.605 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/api/Order - null null
2024-09-26 15:17:10.608 +05:00 [INF] Incoming Request: GET /api/Order
2024-09-26 15:17:10.614 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 15:17:10.622 +05:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrders() on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 15:17:10.751 +05:00 [INF] Executed DbCommand (10ms) [Parameters=[@__customerId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status], [t].[OrderId], [t].[BookId], [t].[Quantity], [t].[UnitPrice], [t].[Id], [t].[AuthorId], [t].[ISBN], [t].[Price], [t].[StockQuantity], [t].[Title]
FROM [Orders] AS [o]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t] ON [o].[Id] = [t].[OrderId]
WHERE [o].[CustomerId] = @__customerId_0
ORDER BY [o].[Id], [t].[OrderId], [t].[BookId]
2024-09-26 15:17:10.756 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) executed in 130ms
2024-09-26 15:17:10.758 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookstoreAPI.Models.DTOs.OrderReadDTO, BookstoreAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-26 15:17:10.771 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) in 145.3169ms
2024-09-26 15:17:10.773 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 15:17:10.774 +05:00 [INF] Outgoing Response: 200
2024-09-26 15:17:10.776 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/api/Order - 200 null application/json; charset=utf-8 170.8493ms
2024-09-26 15:18:35.902 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json 25
2024-09-26 15:18:35.913 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 15:18:35.922 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 15:18:35.933 +05:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(Int32, BookstoreAPI.Models.DTOs.OrderStatusUpdateDTO) on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 15:18:35.965 +05:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-09-26 15:18:35.998 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) in 59.2866ms
2024-09-26 15:18:36.000 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 15:18:36.007 +05:00 [INF] Outgoing Response: 400
2024-09-26 15:18:36.009 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 400 null application/problem+json; charset=utf-8 106.9645ms
2024-09-26 15:24:05.723 +05:00 [INF] Application is shutting down...
2024-09-26 15:24:11.524 +05:00 [INF] User profile is available. Using 'C:\Users\Abubakar Sabir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-26 15:24:12.487 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 15:24:12.537 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:24:12.540 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:24:13.340 +05:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:24:13.444 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:24:13.463 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-09-26 15:24:13.547 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-09-26 15:24:13.590 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2024-09-26 15:24:13.779 +05:00 [INF] Now listening on: http://localhost:5296
2024-09-26 15:24:13.784 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-26 15:24:13.786 +05:00 [INF] Hosting environment: Development
2024-09-26 15:24:13.788 +05:00 [INF] Content root path: E:\House of Technology Office\Bookstore API project learning\BookstoreAPI
2024-09-26 15:24:29.710 +05:00 [INF] Application is shutting down...
2024-09-26 15:24:35.061 +05:00 [INF] User profile is available. Using 'C:\Users\Abubakar Sabir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-26 15:24:35.782 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 15:24:35.821 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:24:35.825 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:24:36.599 +05:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:24:36.705 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:24:36.858 +05:00 [INF] Now listening on: http://localhost:5296
2024-09-26 15:24:36.861 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-26 15:24:36.862 +05:00 [INF] Hosting environment: Development
2024-09-26 15:24:36.863 +05:00 [INF] Content root path: E:\House of Technology Office\Bookstore API project learning\BookstoreAPI
2024-09-26 15:24:44.752 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/index.html - null null
2024-09-26 15:24:44.883 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/index.html - 200 null text/html;charset=utf-8 133.1537ms
2024-09-26 15:24:45.090 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - null null
2024-09-26 15:24:45.232 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 141.5053ms
2024-09-26 15:25:17.648 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json 72
2024-09-26 15:25:17.661 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 15:25:17.710 +05:00 [WRN] Failed to determine the https port for redirect.
2024-09-26 15:25:17.713 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:25:17.736 +05:00 [INF] Route matched with {action = "Login", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookstoreAPI.Models.DTOs.LoginDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 15:25:17.857 +05:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 15:25:18.098 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) executed in 329ms
2024-09-26 15:25:18.099 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 15:25:18.109 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.Threading.Tasks.Task`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 15:25:18.151 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) in 406.1185ms
2024-09-26 15:25:18.160 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:25:18.163 +05:00 [INF] Outgoing Response: 200
2024-09-26 15:25:18.174 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 200 null application/json; charset=utf-8 525.6395ms
2024-09-26 15:25:54.326 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json 59
2024-09-26 15:25:54.337 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 15:25:54.340 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:25:54.342 +05:00 [INF] Route matched with {action = "Login", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookstoreAPI.Models.DTOs.LoginDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 15:25:54.396 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 15:25:54.516 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) executed in 148ms
2024-09-26 15:25:54.516 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 15:25:54.518 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.Threading.Tasks.Task`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 15:25:54.522 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) in 171.8292ms
2024-09-26 15:25:54.524 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:25:54.525 +05:00 [INF] Outgoing Response: 200
2024-09-26 15:25:54.527 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 200 null application/json; charset=utf-8 200.6671ms
2024-09-26 15:26:43.624 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json 17
2024-09-26 15:26:43.630 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 15:26:43.706 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 15:26:43.712 +05:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(Int32, BookstoreAPI.Models.DTOs.OrderStatusUpdateDTO) on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 15:26:43.841 +05:00 [INF] Executed DbCommand (16ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CustomerId], [t].[CustomerId1], [t].[OrderDate], [t].[Status], [t0].[OrderId], [t0].[BookId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id], [t0].[AuthorId], [t0].[ISBN], [t0].[Price], [t0].[StockQuantity], [t0].[Title]
FROM (
    SELECT TOP(1) [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status]
    FROM [Orders] AS [o]
    WHERE [o].[Id] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[OrderId], [t0].[BookId]
2024-09-26 15:26:44.160 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'BookstoreAPI.Models.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method201(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method201(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-09-26 15:26:44.166 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) executed in 446ms
2024-09-26 15:26:44.168 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) in 453.9392ms
2024-09-26 15:26:44.174 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 15:26:44.178 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method201(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at BookstoreAPI.Repositories.OrderRepository.GetOrderByIdAsync(Int32 orderId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Repositories\OrderRepository.cs:line 35
   at BookstoreAPI.Services.OrderService.GetOrderByIdAsync(Int32 orderId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Services\OrderService.cs:line 73
   at BookstoreAPI.Controllers.OrderController.UpdateOrderStatus(Int32 orderId, OrderStatusUpdateDTO orderStatusUpdateDTO) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Controllers\OrderController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at BookstoreAPI.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Middleware\RequestResponseLoggingMiddleware.cs:line 22
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-26 15:26:44.359 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 500 null text/plain; charset=utf-8 735.4659ms
2024-09-26 15:27:42.694 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json 25
2024-09-26 15:27:42.698 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 15:27:42.710 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 15:27:42.712 +05:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(Int32, BookstoreAPI.Models.DTOs.OrderStatusUpdateDTO) on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 15:27:42.725 +05:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-09-26 15:27:42.746 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) in 30.3768ms
2024-09-26 15:27:42.749 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 15:27:42.750 +05:00 [INF] Outgoing Response: 400
2024-09-26 15:27:42.751 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 400 null application/problem+json; charset=utf-8 57.36ms
2024-09-26 15:36:08.481 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json 17
2024-09-26 15:36:08.486 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 15:36:08.494 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 15:36:08.496 +05:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(Int32, BookstoreAPI.Models.DTOs.OrderStatusUpdateDTO) on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 15:36:08.568 +05:00 [INF] Executed DbCommand (20ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CustomerId], [t].[CustomerId1], [t].[OrderDate], [t].[Status], [t0].[OrderId], [t0].[BookId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id], [t0].[AuthorId], [t0].[ISBN], [t0].[Price], [t0].[StockQuantity], [t0].[Title]
FROM (
    SELECT TOP(1) [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status]
    FROM [Orders] AS [o]
    WHERE [o].[Id] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[OrderId], [t0].[BookId]
2024-09-26 15:36:08.577 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'BookstoreAPI.Models.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method201(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method201(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-09-26 15:36:08.584 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) executed in 72ms
2024-09-26 15:36:08.588 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) in 80.91ms
2024-09-26 15:36:08.593 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 15:36:08.598 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method201(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at BookstoreAPI.Repositories.OrderRepository.GetOrderByIdAsync(Int32 orderId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Repositories\OrderRepository.cs:line 35
   at BookstoreAPI.Services.OrderService.GetOrderByIdAsync(Int32 orderId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Services\OrderService.cs:line 73
   at BookstoreAPI.Controllers.OrderController.UpdateOrderStatus(Int32 orderId, OrderStatusUpdateDTO orderStatusUpdateDTO) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Controllers\OrderController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at BookstoreAPI.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Middleware\RequestResponseLoggingMiddleware.cs:line 22
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-26 15:36:08.623 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 500 null text/plain; charset=utf-8 141.5361ms
2024-09-26 15:38:11.238 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json 17
2024-09-26 15:38:11.241 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 15:38:11.243 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 15:38:11.246 +05:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(Int32, BookstoreAPI.Models.DTOs.OrderStatusUpdateDTO) on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 15:38:11.271 +05:00 [INF] Executed DbCommand (17ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CustomerId], [t].[CustomerId1], [t].[OrderDate], [t].[Status], [t0].[OrderId], [t0].[BookId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id], [t0].[AuthorId], [t0].[ISBN], [t0].[Price], [t0].[StockQuantity], [t0].[Title]
FROM (
    SELECT TOP(1) [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status]
    FROM [Orders] AS [o]
    WHERE [o].[Id] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[OrderId], [t0].[BookId]
2024-09-26 15:38:11.281 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'BookstoreAPI.Models.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method201(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method201(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-09-26 15:38:11.288 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) executed in 36ms
2024-09-26 15:38:11.289 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) in 38.2756ms
2024-09-26 15:38:11.293 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 15:38:11.302 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method201(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at BookstoreAPI.Repositories.OrderRepository.GetOrderByIdAsync(Int32 orderId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Repositories\OrderRepository.cs:line 35
   at BookstoreAPI.Services.OrderService.GetOrderByIdAsync(Int32 orderId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Services\OrderService.cs:line 73
   at BookstoreAPI.Controllers.OrderController.UpdateOrderStatus(Int32 orderId, OrderStatusUpdateDTO orderStatusUpdateDTO) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Controllers\OrderController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at BookstoreAPI.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Middleware\RequestResponseLoggingMiddleware.cs:line 22
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-26 15:38:11.330 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 500 null text/plain; charset=utf-8 92.4672ms
2024-09-26 15:40:24.584 +05:00 [INF] Application is shutting down...
2024-09-26 15:43:40.262 +05:00 [INF] User profile is available. Using 'C:\Users\Abubakar Sabir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-26 15:43:41.011 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 15:43:41.060 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:43:41.063 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:43:41.965 +05:00 [INF] Executed DbCommand (63ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:43:42.091 +05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:43:42.593 +05:00 [INF] Now listening on: http://localhost:5296
2024-09-26 15:43:42.597 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-26 15:43:42.599 +05:00 [INF] Hosting environment: Development
2024-09-26 15:43:42.603 +05:00 [INF] Content root path: E:\House of Technology Office\Bookstore API project learning\BookstoreAPI
2024-09-26 15:44:09.739 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/index.html - null null
2024-09-26 15:44:09.918 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/index.html - 200 null text/html;charset=utf-8 181.2017ms
2024-09-26 15:44:10.118 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - null null
2024-09-26 15:44:10.267 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 149.7611ms
2024-09-26 15:44:33.264 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json-patch+json 72
2024-09-26 15:44:33.309 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 15:44:33.410 +05:00 [WRN] Failed to determine the https port for redirect.
2024-09-26 15:44:33.414 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:44:33.444 +05:00 [INF] Route matched with {action = "Login", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookstoreAPI.Models.DTOs.LoginDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 15:44:33.700 +05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 15:44:34.068 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) executed in 500ms
2024-09-26 15:44:34.072 +05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 15:44:34.080 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.Threading.Tasks.Task`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 15:44:34.194 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) in 743.4635ms
2024-09-26 15:44:34.196 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:44:34.200 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'target' with type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[System.String,BookstoreAPI.Controllers.CustomerController+<GenerateJwtToken>d__8]'. Path 'token.moveNextAction'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at BookstoreAPI.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Middleware\RequestResponseLoggingMiddleware.cs:line 22
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-26 15:44:34.272 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 500 null text/plain; charset=utf-8 1007.2066ms
2024-09-26 15:46:53.369 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/api/Books - null null
2024-09-26 15:46:53.389 +05:00 [INF] Incoming Request: GET /api/Books
2024-09-26 15:46:53.396 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.BooksController.GetBooks (BookstoreAPI)'
2024-09-26 15:46:53.419 +05:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[BookstoreAPI.Models.DTOs.BookReadDTO]]] GetBooks() on controller BookstoreAPI.Controllers.BooksController (BookstoreAPI).
2024-09-26 15:46:53.804 +05:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title], [a].[Id], [a].[Bio], [a].[Name]
FROM [Books] AS [b]
INNER JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
2024-09-26 15:46:53.887 +05:00 [INF] Action BookstoreAPI.Controllers.BooksController.GetBooks (BookstoreAPI) executed in 464ms
2024-09-26 15:46:53.889 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookstoreAPI.Models.DTOs.BookReadDTO, BookstoreAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-26 15:46:53.919 +05:00 [INF] Executed action BookstoreAPI.Controllers.BooksController.GetBooks (BookstoreAPI) in 497.7141ms
2024-09-26 15:46:53.921 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.BooksController.GetBooks (BookstoreAPI)'
2024-09-26 15:46:53.923 +05:00 [INF] Outgoing Response: 200
2024-09-26 15:46:54.081 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/api/Books - 200 587 application/json; charset=utf-8 711.8281ms
2024-09-26 15:49:27.162 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json-patch+json 72
2024-09-26 15:49:27.166 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 15:49:27.173 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:49:27.176 +05:00 [INF] Route matched with {action = "Login", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookstoreAPI.Models.DTOs.LoginDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 15:49:27.216 +05:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 15:49:27.330 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) executed in 129ms
2024-09-26 15:49:27.333 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.Threading.Tasks.Task`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 15:49:27.336 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 15:49:27.338 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) in 160.0018ms
2024-09-26 15:49:27.341 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:49:27.342 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'task' with type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[System.String,BookstoreAPI.Controllers.CustomerController+<GenerateJwtToken>d__8]'. Path 'token.stateMachine.<>t__builder'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at BookstoreAPI.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Middleware\RequestResponseLoggingMiddleware.cs:line 22
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-26 15:49:27.361 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 500 null text/plain; charset=utf-8 199.6451ms
2024-09-26 15:49:49.087 +05:00 [INF] Application is shutting down...
2024-09-26 15:58:43.009 +05:00 [INF] User profile is available. Using 'C:\Users\Abubakar Sabir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-26 15:58:43.638 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 15:58:43.670 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:58:43.675 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 15:58:44.414 +05:00 [INF] Executed DbCommand (42ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:58:44.518 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 15:58:44.690 +05:00 [INF] Now listening on: http://localhost:5296
2024-09-26 15:58:44.693 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-26 15:58:44.695 +05:00 [INF] Hosting environment: Development
2024-09-26 15:58:44.696 +05:00 [INF] Content root path: E:\House of Technology Office\Bookstore API project learning\BookstoreAPI
2024-09-26 15:58:58.531 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/index.html - null null
2024-09-26 15:58:58.665 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/index.html - 200 null text/html;charset=utf-8 135.7416ms
2024-09-26 15:58:58.863 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - null null
2024-09-26 15:58:59.003 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 139.6417ms
2024-09-26 15:59:26.283 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json-patch+json 72
2024-09-26 15:59:26.332 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 15:59:26.364 +05:00 [WRN] Failed to determine the https port for redirect.
2024-09-26 15:59:26.367 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:59:26.393 +05:00 [INF] Route matched with {action = "Login", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookstoreAPI.Models.DTOs.LoginDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 15:59:26.583 +05:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 15:59:26.799 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-09-26 15:59:26.833 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 15:59:26.854 +05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2024-09-26 15:59:26.863 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 15:59:26.887 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) executed in 386ms
2024-09-26 15:59:26.895 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 15:59:26.948 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) in 547.4107ms
2024-09-26 15:59:26.951 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 15:59:26.958 +05:00 [INF] Outgoing Response: 200
2024-09-26 15:59:26.970 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 200 445 application/json; charset=utf-8 686.7887ms
2024-09-26 16:00:01.684 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json-patch+json 17
2024-09-26 16:00:01.689 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 16:00:02.028 +05:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-09-26 16:00:02.032 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-09-26 16:00:02.034 +05:00 [INF] Outgoing Response: 403
2024-09-26 16:00:02.037 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 403 0 null 352.4885ms
2024-09-26 16:00:32.578 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/api/Order - null null
2024-09-26 16:00:32.591 +05:00 [INF] Incoming Request: GET /api/Order
2024-09-26 16:00:32.621 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 16:00:32.644 +05:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrders() on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 16:00:33.131 +05:00 [INF] Executed DbCommand (12ms) [Parameters=[@__customerId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status], [t].[OrderId], [t].[BookId], [t].[Quantity], [t].[UnitPrice], [t].[Id], [t].[AuthorId], [t].[ISBN], [t].[Price], [t].[StockQuantity], [t].[Title]
FROM [Orders] AS [o]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t] ON [o].[Id] = [t].[OrderId]
WHERE [o].[CustomerId] = @__customerId_0
ORDER BY [o].[Id], [t].[OrderId], [t].[BookId]
2024-09-26 16:00:33.173 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'BookstoreAPI.Models.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method206(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method206(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-09-26 16:00:33.186 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) executed in 531ms
2024-09-26 16:00:33.189 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) in 534.9819ms
2024-09-26 16:00:33.190 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 16:00:33.192 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method206(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at BookstoreAPI.Repositories.OrderRepository.GetOrdersByCustomerAsync(String customerId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Repositories\OrderRepository.cs:line 26
   at BookstoreAPI.Services.OrderService.GetOrdersByCustomerAsync(String customerId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Services\OrderService.cs:line 55
   at BookstoreAPI.Controllers.OrderController.GetOrders() in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Controllers\OrderController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at BookstoreAPI.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Middleware\RequestResponseLoggingMiddleware.cs:line 22
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-26 16:00:33.252 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/api/Order - 500 null text/plain; charset=utf-8 673.4714ms
2024-09-26 16:00:53.786 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/api/Order - null null
2024-09-26 16:00:53.790 +05:00 [INF] Incoming Request: GET /api/Order
2024-09-26 16:00:53.793 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 16:00:53.796 +05:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrders() on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 16:00:53.810 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__customerId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status], [t].[OrderId], [t].[BookId], [t].[Quantity], [t].[UnitPrice], [t].[Id], [t].[AuthorId], [t].[ISBN], [t].[Price], [t].[StockQuantity], [t].[Title]
FROM [Orders] AS [o]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t] ON [o].[Id] = [t].[OrderId]
WHERE [o].[CustomerId] = @__customerId_0
ORDER BY [o].[Id], [t].[OrderId], [t].[BookId]
2024-09-26 16:00:53.817 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'BookstoreAPI.Models.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method206(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method206(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-09-26 16:00:53.828 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) executed in 21ms
2024-09-26 16:00:53.831 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) in 26.1984ms
2024-09-26 16:00:53.835 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 16:00:53.837 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method206(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at BookstoreAPI.Repositories.OrderRepository.GetOrdersByCustomerAsync(String customerId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Repositories\OrderRepository.cs:line 26
   at BookstoreAPI.Services.OrderService.GetOrdersByCustomerAsync(String customerId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Services\OrderService.cs:line 55
   at BookstoreAPI.Controllers.OrderController.GetOrders() in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Controllers\OrderController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at BookstoreAPI.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Middleware\RequestResponseLoggingMiddleware.cs:line 22
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-26 16:00:53.863 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/api/Order - 500 null text/plain; charset=utf-8 77.3609ms
2024-09-26 16:01:23.478 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/api/Customer/profile - null null
2024-09-26 16:01:23.485 +05:00 [INF] Incoming Request: GET /api/Customer/profile
2024-09-26 16:01:23.494 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI)'
2024-09-26 16:01:23.501 +05:00 [INF] Route matched with {action = "GetProfile", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile() on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 16:01:23.820 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2024-09-26 16:01:23.825 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI) executed in 305ms
2024-09-26 16:01:23.828 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 16:01:23.833 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI) in 322.1095ms
2024-09-26 16:01:23.835 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.GetProfile (BookstoreAPI)'
2024-09-26 16:01:23.839 +05:00 [INF] Outgoing Response: 200
2024-09-26 16:01:23.840 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/api/Customer/profile - 200 79 application/json; charset=utf-8 361.9559ms
2024-09-26 16:03:05.986 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json-patch+json 59
2024-09-26 16:03:05.991 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 16:03:05.994 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 16:03:06.004 +05:00 [INF] Route matched with {action = "Login", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookstoreAPI.Models.DTOs.LoginDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 16:03:06.030 +05:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 16:03:06.154 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-09-26 16:03:06.162 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 16:03:06.174 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 16:03:06.190 +05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2024-09-26 16:03:06.195 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 16:03:06.199 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2024-09-26 16:03:06.207 +05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2024-09-26 16:03:06.211 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 16:03:06.215 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) executed in 197ms
2024-09-26 16:03:06.216 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 16:03:06.218 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) in 210.7417ms
2024-09-26 16:03:06.222 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 16:03:06.225 +05:00 [INF] Outgoing Response: 200
2024-09-26 16:03:06.227 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 200 557 application/json; charset=utf-8 241.2084ms
2024-09-26 16:03:38.195 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json-patch+json 17
2024-09-26 16:03:38.199 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 16:03:38.205 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 16:03:38.212 +05:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(Int32, BookstoreAPI.Models.DTOs.OrderStatusUpdateDTO) on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 16:03:38.568 +05:00 [INF] Executed DbCommand (26ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CustomerId], [t].[CustomerId1], [t].[OrderDate], [t].[Status], [t0].[OrderId], [t0].[BookId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id], [t0].[AuthorId], [t0].[ISBN], [t0].[Price], [t0].[StockQuantity], [t0].[Title]
FROM (
    SELECT TOP(1) [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status]
    FROM [Orders] AS [o]
    WHERE [o].[Id] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[OrderId], [t0].[BookId]
2024-09-26 16:03:38.573 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'BookstoreAPI.Models.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method253(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method253(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-09-26 16:03:38.580 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) executed in 66ms
2024-09-26 16:03:38.587 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) in 363.6533ms
2024-09-26 16:03:38.590 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 16:03:38.591 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method253(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at BookstoreAPI.Repositories.OrderRepository.GetOrderByIdAsync(Int32 orderId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Repositories\OrderRepository.cs:line 35
   at BookstoreAPI.Services.OrderService.GetOrderByIdAsync(Int32 orderId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Services\OrderService.cs:line 73
   at BookstoreAPI.Controllers.OrderController.UpdateOrderStatus(Int32 orderId, OrderStatusUpdateDTO orderStatusUpdateDTO) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Controllers\OrderController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at BookstoreAPI.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Middleware\RequestResponseLoggingMiddleware.cs:line 22
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-26 16:03:38.611 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 500 null text/plain; charset=utf-8 415.8522ms
2024-09-26 16:04:01.923 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json-patch+json 27
2024-09-26 16:04:01.930 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 16:04:01.934 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 16:04:01.937 +05:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(Int32, BookstoreAPI.Models.DTOs.OrderStatusUpdateDTO) on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 16:04:01.984 +05:00 [INF] Executed DbCommand (33ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CustomerId], [t].[CustomerId1], [t].[OrderDate], [t].[Status], [t0].[OrderId], [t0].[BookId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id], [t0].[AuthorId], [t0].[ISBN], [t0].[Price], [t0].[StockQuantity], [t0].[Title]
FROM (
    SELECT TOP(1) [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status]
    FROM [Orders] AS [o]
    WHERE [o].[Id] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[OrderId], [t0].[BookId]
2024-09-26 16:04:01.994 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'BookstoreAPI.Models.ApplicationDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method253(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method253(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-09-26 16:04:01.999 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) executed in 48ms
2024-09-26 16:04:02.000 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) in 52.5985ms
2024-09-26 16:04:02.002 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 16:04:02.008 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.Int32'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_Int32()
   at Microsoft.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)
   at lambda_method253(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at BookstoreAPI.Repositories.OrderRepository.GetOrderByIdAsync(Int32 orderId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Repositories\OrderRepository.cs:line 35
   at BookstoreAPI.Services.OrderService.GetOrderByIdAsync(Int32 orderId) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Services\OrderService.cs:line 73
   at BookstoreAPI.Controllers.OrderController.UpdateOrderStatus(Int32 orderId, OrderStatusUpdateDTO orderStatusUpdateDTO) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Controllers\OrderController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at BookstoreAPI.Middleware.RequestResponseLoggingMiddleware.InvokeAsync(HttpContext context) in E:\House of Technology Office\Bookstore API project learning\BookstoreAPI\Middleware\RequestResponseLoggingMiddleware.cs:line 22
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-26 16:04:02.024 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 500 null text/plain; charset=utf-8 100.459ms
2024-09-26 16:07:00.754 +05:00 [INF] Application is shutting down...
2024-09-26 16:13:57.936 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 16:13:58.030 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:13:58.032 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:13:58.324 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 16:13:58.331 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:13:58.334 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:14:18.715 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 16:14:18.805 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:14:18.808 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:14:19.313 +05:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-26 16:14:19.352 +05:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-26 16:14:19.357 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-26 16:14:19.362 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-26 16:14:19.385 +05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-09-26 16:14:19.406 +05:00 [INF] Applying migration '20240926111401_UpdateCustomerIdToString2'.
2024-09-26 16:14:19.725 +05:00 [ERR] Failed executing DbCommand (193ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Orders]') AND [c].[name] = N'Status');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Orders] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Orders] ALTER COLUMN [Status] int NOT NULL;
2024-09-26 16:28:56.863 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 16:28:56.972 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:28:56.976 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:28:57.426 +05:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-26 16:28:57.461 +05:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-26 16:28:57.467 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-26 16:28:57.471 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-26 16:28:57.498 +05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-09-26 16:28:57.519 +05:00 [INF] Applying migration '20240926111401_UpdateCustomerIdToString2'.
2024-09-26 16:28:57.634 +05:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE Orders SET Status = 0 WHERE Status = 'Pending'; UPDATE Orders SET Status = 1 WHERE Status = 'Shipped'; UPDATE Orders SET Status = 2 WHERE Status = 'Delivered'; UPDATE Orders SET Status = 3 WHERE Status = 'Canceled';
2024-09-26 16:28:57.757 +05:00 [INF] Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Orders]') AND [c].[name] = N'Status');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Orders] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Orders] ALTER COLUMN [Status] int NOT NULL;
2024-09-26 16:28:57.763 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240926111401_UpdateCustomerIdToString2', N'8.0.8');
2024-09-26 16:32:20.984 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 16:32:21.080 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:32:21.082 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:32:21.481 +05:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-26 16:32:21.517 +05:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-26 16:32:21.522 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-26 16:32:21.525 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-26 16:32:21.548 +05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-09-26 16:32:21.567 +05:00 [INF] No migrations were applied. The database is already up to date.
2024-09-26 16:32:30.307 +05:00 [INF] User profile is available. Using 'C:\Users\Abubakar Sabir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-26 16:32:30.887 +05:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2024-09-26 16:32:30.917 +05:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Book'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:32:30.920 +05:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderDetail'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-09-26 16:32:31.525 +05:00 [INF] Executed DbCommand (36ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 16:32:31.613 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 16:32:31.746 +05:00 [INF] Now listening on: http://localhost:5296
2024-09-26 16:32:31.749 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-26 16:32:31.751 +05:00 [INF] Hosting environment: Development
2024-09-26 16:32:31.752 +05:00 [INF] Content root path: E:\House of Technology Office\Bookstore API project learning\BookstoreAPI
2024-09-26 16:32:33.706 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/index.html - null null
2024-09-26 16:32:33.837 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/index.html - 200 null text/html;charset=utf-8 133.3913ms
2024-09-26 16:32:34.043 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - null null
2024-09-26 16:32:34.184 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 141.6389ms
2024-09-26 16:33:33.298 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json-patch+json 59
2024-09-26 16:33:33.359 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 16:33:33.400 +05:00 [WRN] Failed to determine the https port for redirect.
2024-09-26 16:33:33.403 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 16:33:33.426 +05:00 [INF] Route matched with {action = "Login", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookstoreAPI.Models.DTOs.LoginDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 16:33:33.601 +05:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 16:33:33.810 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-09-26 16:33:33.846 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 16:33:33.857 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 16:33:33.872 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2024-09-26 16:33:33.879 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-09-26 16:33:33.886 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2024-09-26 16:33:33.905 +05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2024-09-26 16:33:33.987 +05:00 [INF] Executed DbCommand (35ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 16:33:34.062 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) executed in 538ms
2024-09-26 16:33:34.066 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 16:33:34.105 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) in 670.6281ms
2024-09-26 16:33:34.108 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 16:33:34.116 +05:00 [INF] Outgoing Response: 200
2024-09-26 16:33:34.123 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 200 557 application/json; charset=utf-8 824.9597ms
2024-09-26 16:34:25.163 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json-patch+json 27
2024-09-26 16:34:25.172 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 16:34:25.263 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 16:34:25.272 +05:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(Int32, BookstoreAPI.Models.DTOs.OrderStatusUpdateDTO) on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 16:34:25.539 +05:00 [INF] Executed DbCommand (27ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CustomerId], [t].[CustomerId1], [t].[OrderDate], [t].[Status], [t0].[OrderId], [t0].[BookId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id], [t0].[AuthorId], [t0].[ISBN], [t0].[Price], [t0].[StockQuantity], [t0].[Title]
FROM (
    SELECT TOP(1) [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status]
    FROM [Orders] AS [o]
    WHERE [o].[Id] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[OrderId], [t0].[BookId]
2024-09-26 16:34:25.911 +05:00 [INF] Executed DbCommand (23ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [CustomerId] = @p0, [CustomerId1] = @p1, [OrderDate] = @p2, [Status] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2024-09-26 16:34:25.946 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) executed in 653ms
2024-09-26 16:34:25.949 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 16:34:25.959 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) in 683.2707ms
2024-09-26 16:34:25.964 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 16:34:25.972 +05:00 [INF] Outgoing Response: 200
2024-09-26 16:34:25.975 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 200 47 application/json; charset=utf-8 812.3378ms
2024-09-26 16:35:31.200 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json-patch+json 17
2024-09-26 16:35:31.212 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 16:35:31.218 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 16:35:31.219 +05:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(Int32, BookstoreAPI.Models.DTOs.OrderStatusUpdateDTO) on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 16:35:31.268 +05:00 [INF] Executed DbCommand (22ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CustomerId], [t].[CustomerId1], [t].[OrderDate], [t].[Status], [t0].[OrderId], [t0].[BookId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id], [t0].[AuthorId], [t0].[ISBN], [t0].[Price], [t0].[StockQuantity], [t0].[Title]
FROM (
    SELECT TOP(1) [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status]
    FROM [Orders] AS [o]
    WHERE [o].[Id] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[OrderId], [t0].[BookId]
2024-09-26 16:35:31.287 +05:00 [INF] Executed DbCommand (8ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [CustomerId] = @p0, [CustomerId1] = @p1, [OrderDate] = @p2, [Status] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2024-09-26 16:35:31.292 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) executed in 49ms
2024-09-26 16:35:31.592 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 16:35:31.613 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) in 390.1694ms
2024-09-26 16:35:31.620 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 16:35:31.635 +05:00 [INF] Outgoing Response: 200
2024-09-26 16:35:31.642 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 200 45 application/json; charset=utf-8 442.9478ms
2024-09-26 16:36:02.658 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - application/json-patch+json 17
2024-09-26 16:36:02.663 +05:00 [INF] Incoming Request: PATCH /api/Order/1/status
2024-09-26 16:36:02.669 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 16:36:02.674 +05:00 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(Int32, BookstoreAPI.Models.DTOs.OrderStatusUpdateDTO) on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 16:36:02.695 +05:00 [INF] Executed DbCommand (14ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CustomerId], [t].[CustomerId1], [t].[OrderDate], [t].[Status], [t0].[OrderId], [t0].[BookId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id], [t0].[AuthorId], [t0].[ISBN], [t0].[Price], [t0].[StockQuantity], [t0].[Title]
FROM (
    SELECT TOP(1) [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status]
    FROM [Orders] AS [o]
    WHERE [o].[Id] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[OrderId], [t0].[BookId]
2024-09-26 16:36:02.717 +05:00 [INF] Executed DbCommand (15ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [CustomerId] = @p0, [CustomerId1] = @p1, [OrderDate] = @p2, [Status] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2024-09-26 16:36:02.720 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) executed in 39ms
2024-09-26 16:36:02.723 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 16:36:02.728 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI) in 50.6353ms
2024-09-26 16:36:02.731 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.UpdateOrderStatus (BookstoreAPI)'
2024-09-26 16:36:02.732 +05:00 [INF] Outgoing Response: 200
2024-09-26 16:36:02.734 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5296/api/Order/1/status - 200 47 application/json; charset=utf-8 76.1841ms
2024-09-26 16:36:34.006 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5296/api/Customer/login - application/json-patch+json 72
2024-09-26 16:36:34.010 +05:00 [INF] Incoming Request: POST /api/Customer/login
2024-09-26 16:36:34.013 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 16:36:34.016 +05:00 [INF] Route matched with {action = "Login", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookstoreAPI.Models.DTOs.LoginDTO) on controller BookstoreAPI.Controllers.CustomerController (BookstoreAPI).
2024-09-26 16:36:34.043 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2024-09-26 16:36:34.167 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-09-26 16:36:34.178 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 16:36:34.183 +05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2024-09-26 16:36:34.192 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-09-26 16:36:34.196 +05:00 [INF] Action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) executed in 161ms
2024-09-26 16:36:34.197 +05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-26 16:36:34.199 +05:00 [INF] Executed action BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI) in 177.5556ms
2024-09-26 16:36:34.207 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.CustomerController.Login (BookstoreAPI)'
2024-09-26 16:36:34.209 +05:00 [INF] Outgoing Response: 200
2024-09-26 16:36:34.210 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5296/api/Customer/login - 200 445 application/json; charset=utf-8 204.3491ms
2024-09-26 16:36:58.242 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5296/api/Order - null null
2024-09-26 16:36:58.273 +05:00 [INF] Incoming Request: GET /api/Order
2024-09-26 16:36:58.281 +05:00 [INF] Executing endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 16:36:58.288 +05:00 [INF] Route matched with {action = "GetOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrders() on controller BookstoreAPI.Controllers.OrderController (BookstoreAPI).
2024-09-26 16:36:58.345 +05:00 [INF] Executed DbCommand (23ms) [Parameters=[@__customerId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CustomerId], [o].[CustomerId1], [o].[OrderDate], [o].[Status], [t].[OrderId], [t].[BookId], [t].[Quantity], [t].[UnitPrice], [t].[Id], [t].[AuthorId], [t].[ISBN], [t].[Price], [t].[StockQuantity], [t].[Title]
FROM [Orders] AS [o]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[BookId], [o0].[Quantity], [o0].[UnitPrice], [b].[Id], [b].[AuthorId], [b].[ISBN], [b].[Price], [b].[StockQuantity], [b].[Title]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [t] ON [o].[Id] = [t].[OrderId]
WHERE [o].[CustomerId] = @__customerId_0
ORDER BY [o].[Id], [t].[OrderId], [t].[BookId]
2024-09-26 16:36:58.351 +05:00 [INF] Action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) executed in 55ms
2024-09-26 16:36:58.352 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookstoreAPI.Models.DTOs.OrderReadDTO, BookstoreAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-26 16:36:58.369 +05:00 [INF] Executed action BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI) in 73.8744ms
2024-09-26 16:36:58.371 +05:00 [INF] Executed endpoint 'BookstoreAPI.Controllers.OrderController.GetOrders (BookstoreAPI)'
2024-09-26 16:36:58.373 +05:00 [INF] Outgoing Response: 200
2024-09-26 16:36:58.379 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5296/api/Order - 200 272 application/json; charset=utf-8 137.2553ms
